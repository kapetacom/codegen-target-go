//#FILENAME:generated/rest_api/{{snakeCase (controller-name this)}}_router.go:write-always
//
// GENERATED SOURCE - DO NOT EDIT
//
package rest
import (
   "github.com/labstack/echo/v4"
   providers "github.com/kapetacom/sdk-go-config/providers"
   generated  "{{@root.options.basePackage}}/generated/services"
   "fmt"
   	"github.com/kapetacom/sdk-go-rest-server/request"
   "{{@root.options.basePackage}}/pkg/services"
{{#if (golang-import-entities .)}}
    "{{@root.options.basePackage}}/generated/entities"
{{/if}}
)

func Create{{controller-name this}}Router(e *echo.Echo, cfg providers.ConfigProvider) error {
    routeHandler, err := services.New{{pascalCase (controller-name this)}}Handler(cfg)
    if err != nil {
        return err
    }

    // Done like this to ensure interface compliance
    func(serviceInterface generated.{{pascalCase (controller-name this)}}Interface) {
    {{#methods methods}}
        e.{{./method}}("{{echoURLPath path base=../path}}",  func(ctx echo.Context) error {
        {{#parametersNeedError this}}
        var err error
        {{/parametersNeedError}}
        {{queryParametersVariables this}}
        {{pathParametersVariables this}}
        {{bodyParametersVariables this}}
        return serviceInterface.{{pascalCase (method name)}}(ctx{{requestparameterarguments this}})
        })
    {{/methods}}
    }(routeHandler)

    return nil
}
